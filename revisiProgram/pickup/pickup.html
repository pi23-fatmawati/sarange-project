<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="sortcut icon" href="../login/assets/shortcut-icon-sarange.svg" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="stylepickup.css" />
    <title>Atur Penjemputan | Sarange</title>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-light">
      <div class="container-fluid container-md" id="myNavbar">
        <a class="navbar-brand" href="#">
          <img src="../assets/Full Logo 3.svg" alt="" />
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div
          class="collapse navbar-collapse navbar-list"
          id="navbarSupportedContent"
        >
          <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
            <li class="nav-item me-5">
              <a href="#">Beranda</a>
            </li>
            <li class="nav-item me-5">
              <a href="#">Jual Sampah</a>
            </li>
            <li class="nav-item me-5">
              <a href="#">Riwayat</a>
            </li>
          </ul>
          <a class="nav-link img-profile" href="#">
            <img src="../assets/profile.png" alt="" />
          </a>
        </div>
      </div>
    </nav>
    <div class="myContainer">
      <div class="mb-3" id="header-page">
        <!-- <div class="mb-3"><i class="fa-regular fa-circle-arrow-left fa-xl" style="color: black;"></i></div> -->
        <div id="container-title">
          <h4>Atur Jadwal Penjemputan</h4>
          <p>
            Pastikan sampahmu sudah siap dan kamu berada di tempat saat waktu
            penjemputan ya!
          </p>
        </div>
      </div>
      <div class="pickup-info">
        <div class="pickup-user-address">
          <div class="mb-3">
            <input
              type="text"
              class="form-control"
              placeholder="Nama"
              disabled
              id="namaInput"
            />
          </div>
          <div class="mb-3">
            <input
              type="tel"
              class="form-control"
              placeholder="Nomor Telepon"
              id="nomorTeleponInput"
            />
          </div>
          <div class="mb-3" id="pickup-address-detail">
            <h6>Alamat Penjemputan</h6>
            <div class="icon-detail">
              <div id="pin-icon">
                <i class="fa-solid fa-location-dot" style="color: black"></i>
              </div>
              <div id="address-detail">
                <div id="address-tag">Home</div>
                <textarea
                  class="form-control"
                  rows="3"
                  placeholder="Alamat"
                  id="alamatTextarea"
                ></textarea>
              </div>
            </div>
          </div>
        </div>
        <div class="pickup-date-time">
          <div class="mb-3" id="pickup-date">
            <h6>Tanggal Penjemputan</h6>
            <div class="mb-3">
              <input type="date" class="form-control" />
            </div>
          </div>
          <!-- ... (kode HTML lainnya) ... -->
          <div class="mb-3" id="pickup-time">
            <h6>Waktu Penjemputan</h6>
            <div class="mb-3" id="times">
              <input
                type="radio"
                class="timeRadio"
                name="pickupTime"
                value="08.00"
                id="timeRadio1"
              />
              <label for="timeRadio1" class="mb-3 btn">08:00</label>

              <input
                type="radio"
                class="timeRadio"
                name="pickupTime"
                value="10.00"
                id="timeRadio2"
              />
              <label for="timeRadio2" class="mb-3 btn">10:00</label>

              <input
                type="radio"
                class="timeRadio"
                name="pickupTime"
                value="12.00"
                id="timeRadio3"
              />
              <label for="timeRadio3" class="mb-3 btn">12:00</label>

              <input
                type="radio"
                class="timeRadio"
                name="pickupTime"
                value="14.00"
                id="timeRadio4"
              />
              <label for="timeRadio4" class="mb-3 btn">14:00</label>

              <input
                type="radio"
                class="timeRadio"
                name="pickupTime"
                value="16.00"
                id="timeRadio5"
              />
              <label for="timeRadio5" class="mb-3 btn">16:00</label>
            </div>
          </div>
          <!-- ... (kode HTML lainnya) ... -->
        </div>
      </div>
      <div class="buttons">
        <button type="button" class="btn" id="backButton">Kembali</button>
        <button type="button" class="btn" id="pikcupButton">Atur Jadwal</button>
      </div>
    </div>
    <script
      src="https://kit.fontawesome.com/7d2ff4abe5.js"
      crossorigin="anonymous"
    ></script>
    <!-- <script src="pickup.js"></script> -->
    <!-- Your existing HTML content -->

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Retrieve user information from local storage
        const userData = JSON.parse(localStorage.getItem("userSarange"));

        // Check if user data exists in local storage
        if (userData) {
          // Populate input fields with user information
          document.getElementById("namaInput").value = userData.nama;
          document.getElementById("nomorTeleponInput").value = userData.noHP;
          document.getElementById("alamatTextarea").value = userData.alamat;
        } else {
          // Handle the case when user data is not found in local storage
          console.error("User data not found in local storage");
        }
        document
          .getElementById("pikcupButton")
          .addEventListener("click", function () {
            // Retrieve selected date
            const selectedDate =
              document.querySelector("#pickup-date input").value;

            // Declare a variable to store the selected time
            let selectedTime = null;

            // Get all elements with the class "timeBtn"
            const timeRadios = document.querySelectorAll(".timeRadio");

            // Iterate over each button to find the selected time
            timeRadios.forEach(function (radio) {
              if (radio.checked) {
                selectedTime = radio.value;
              }
            });

            // Check if a time is selected
            if (selectedTime != null) {
              // Create a new object with the pickup information
              const pickupData = {
                nama: document.getElementById("namaInput").value,
                noHP: document.getElementById("nomorTeleponInput").value,
                alamat: document.getElementById("alamatTextarea").value,
                jadwal: selectedTime,
                tanggal: selectedDate,
              };
              const jadwalKirim = {
                jadwal: selectedTime,
              };
              const tanggalKirim = {
                tanggal: selectedDate,
              };
              const statusData = {
                status: "diproses",
              };
              localStorage.setItem(
                "jadwalPengiriman",
                JSON.stringify(pickupData)
              );
              localStorage.setItem("jadwalKirim", JSON.stringify(jadwalKirim));
              localStorage.setItem(
                "tanggalKirim",
                JSON.stringify(tanggalKirim)
              );
              localStorage.setItem("statusKirim", JSON.stringify(statusData));

              console.log("Data Jadwal Pengiriman:", pickupData);
              window.location.href = "riwayat/riwayatOrder.html";
            } else {
              console.error("Please select a time before submitting.");
            }
          });
      });
    </script>
  </body>
</html>
